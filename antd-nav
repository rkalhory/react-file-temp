import { useState,useEffect } from 'react';
import { Link,useLocation } from 'react-router-dom';
import { Menu } from 'antd';
import '../../../../styles/sidebar.css';


const { SubMenu } = Menu;

function Sidebar() {

    const [openKeys, setOpenKeys] = useState();
    const [load, setLoad] = useState(false);
    const location=useLocation();
    //
    // const onOpenChange = keys => {
    //     const latestOpenKey = keys.find(key => openKeys.indexOf(key) === -1);
    //     if (rootSubmenuKeys.indexOf(latestOpenKey) === -1) {
    //         setOpenKeys(keys);
    //     } else {
    //         setOpenKeys(latestOpenKey ? [latestOpenKey] : []);
    //     }
    // };

    useEffect(() => {
        let key=''
        if(location.pathname === '/appointment/reason-list'||location.pathname === '/appointment/add-doctor'||location.pathname === '/appointment/doctor-schedule'){
            key='sub1'
        }else if(location.pathname === '/appointment/turn-report'||location.pathname === '/appointment/patient-reports'||location.pathname === '/appointment/doctor-reports'||location.pathname === '/appointment/department-reports'||location.pathname === '/appointment/financial-reports'){
            key='sub2'
        }
        setOpenKeys(key)
        setLoad(true)
    }, [location.pathname])

    return (
        <>
            {load && (<Menu
                    style={{width: '100%', height: '100%'}}
                    defaultSelectedKeys={['/appointment']}
                    mode="inline"
                    selectedKeys={location.pathname}
                    defaultOpenKeys={[openKeys]}
                >
                    <Menu.Item key="/" className='blue-text'>
                        <svg width="18" height="16" viewBox="0 0 18 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M10.0364 0.1676C9.79219 -0.0621392 9.40378 -0.0547747 9.16887 0.184049C8.93395 0.422873 8.94148 0.802719 9.18569 1.03246L15.9545 7.40035H0.613546C0.274694 7.40035 0 7.66899 0 8.00038C0 8.33177 0.274694 8.60041 0.613546 8.60041H15.9537L9.18569 14.9675C8.94148 15.1973 8.93395 15.5771 9.16887 15.816C9.40378 16.0548 9.79219 16.0621 10.0364 15.8324L17.7491 8.57657C18.0836 8.26182 18.0836 7.73818 17.7491 7.42343L10.0364 0.1676Z" fill="#0078D4"/>
                        </svg>
                        <Link to='/'>صفحه اصلی</Link>
                    </Menu.Item>
                    <Menu.Item key="/appointment">
                        <svg width="23" height="16" viewBox="0 0 23 16" xmlns="http://www.w3.org/2000/svg" className='stroke'>
                            <path
                                d="M9.59505 12.5351L9.6691 12.4257L16.856 2.5178L16.4638 2.23334L16.856 2.5178C16.9465 2.39297 17.1079 2.3602 17.2347 2.4317L17.477 2.00212L17.2347 2.4317C17.3478 2.49553 17.4112 2.63021 17.3865 2.76498L17.3631 2.84129L12.9214 14.2864C12.5372 15.2764 11.4449 15.7513 10.4867 15.3661L10.3002 15.8301L10.4867 15.3661C10.4111 15.3358 10.3375 15.3004 10.2663 15.2602C9.36047 14.7493 9.02488 13.5815 9.52831 12.6487L9.59505 12.5351ZM14.0944 9.25123L13.2236 8.77675L10.242 12.8871L10.2326 12.9002L10.224 12.9138L10.178 12.9866L10.1694 13.0002L10.1617 13.0144C9.85738 13.5731 10.0523 14.2815 10.6109 14.5966L10.6252 14.6047L10.64 14.6118L10.717 14.6488L10.7318 14.6559L10.7471 14.6621C11.2873 14.8792 11.8854 14.6555 12.1682 14.173L12.1784 14.1557L12.1872 14.1376L12.2342 14.0401L12.2428 14.0222L12.25 14.0037L14.0944 9.25123ZM17.8028 8.62488L17.3679 8.8716L17.8028 8.62488C17.7093 8.46006 17.7509 8.25497 17.885 8.14099L17.9515 8.09564L20.2568 6.73923L20.73 6.46082L20.4087 6.01566L20.1439 5.64871L20.1439 5.64865L20.1378 5.64052C19.8184 5.21643 19.4742 4.82148 19.1086 4.45639L19.3992 3.70624C19.9884 4.26617 20.5298 4.89702 21.0114 5.59688C21.5969 6.44781 22.1569 7.47401 22.4738 8.29829C22.5512 8.49948 22.4503 8.71791 22.2669 8.79097C22.0879 8.86223 21.8774 8.77582 21.8016 8.57876C21.6816 8.26673 21.5242 7.92499 21.3455 7.57911L21.1032 7.11007L20.648 7.37751L18.2922 8.76161C18.1242 8.86035 17.9052 8.8054 17.8028 8.62488ZM4.66395 2.66127C7.83678 0.400387 11.7251 -0.0408809 15.1357 1.12313L15.0898 1.18007L15.0818 1.19L15.0743 1.20033L14.6679 1.7607C13.9332 1.52889 13.1766 1.37558 12.4113 1.30315L11.8642 1.25138L11.8642 1.80088L11.8639 4.92735V4.9274C11.8639 5.14406 11.6936 5.30469 11.5019 5.30469C11.3301 5.30469 11.1759 5.17638 11.1453 4.99351L11.1398 4.91086L11.1393 1.78163L11.1393 1.24422L10.6033 1.28301C8.67854 1.42228 6.76565 2.07769 5.07255 3.28415C4.07798 3.99285 3.21885 4.91848 2.5098 5.99523L2.22038 6.43475L2.67412 6.70132L5.06744 8.10742C5.24075 8.20924 5.30662 8.44249 5.20138 8.62799C5.10996 8.78913 4.92511 8.84999 4.76869 8.7918L4.69729 8.75612L2.32776 7.36454L1.85579 7.08737L1.62232 7.58241C1.46993 7.90554 1.32863 8.23777 1.1987 8.57795C1.12336 8.77523 0.912982 8.8621 0.733896 8.79127C0.550317 8.71865 0.448964 8.50049 0.525882 8.2991C1.42519 5.94449 2.83472 3.96473 4.66395 2.66127Z"
                                stroke="black"/>
                        </svg>
                        <Link to='/appointment'>داشبورد</Link>
                    </Menu.Item>

                    <SubMenu key="sub1" icon={
                        <svg width="9" height="16" viewBox="0 0 10 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M9.26036 0.734315C9.57988 1.04673 9.57988 1.55327 9.26036 1.86569L2.47527 8.5L9.26036 15.1343C9.57988 15.4467 9.57988 15.9533 9.26036 16.2657C8.94084 16.5781 8.4228 16.5781 8.10328 16.2657L0.73964 9.06569C0.42012 8.75327 0.42012 8.24673 0.73964 7.93431L8.10328 0.734315C8.4228 0.421895 8.94084 0.421895 9.26036 0.734315Z"
                                fill="#212121"/>
                        </svg>
                    } title="مدیریت اطلاعات اولیه">

                        <Menu.Item key="/appointment/reason-list" icon={
                            <svg width="12" height="16" viewBox="0 0 12 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M2 6.5C2 6.22386 2.22386 6 2.5 6H9.5C9.77614 6 10 6.22386 10 6.5C10 6.77614 9.77614 7 9.5 7H2.5C2.22386 7 2 6.77614 2 6.5Z"
                                    fill="#212121"/>
                                <path
                                    d="M6.5 9C6.22386 9 6 9.22386 6 9.5C6 9.77614 6.22386 10 6.5 10H9.5C9.77614 10 10 9.77614 10 9.5C10 9.22386 9.77614 9 9.5 9H6.5Z"
                                    fill="#212121"/>
                                <path
                                    d="M4.5 12C4.22386 12 4 12.2239 4 12.5C4 12.7761 4.22386 13 4.5 13H9.5C9.77614 13 10 12.7761 10 12.5C10 12.2239 9.77614 12 9.5 12H4.5Z"
                                    fill="#212121"/>
                                <path
                                    d="M3.08535 1C3.29127 0.417404 3.84689 0 4.5 0H7.5C8.15311 0 8.70873 0.417404 8.91465 1H10.5C11.3284 1 12 1.67157 12 2.5V14.5C12 15.3284 11.3284 16 10.5 16H1.5C0.671573 16 0 15.3284 0 14.5V2.5C0 1.67157 0.671573 1 1.5 1H3.08535ZM8 1.5C8 1.22386 7.77614 1 7.5 1H4.5C4.22386 1 4 1.22386 4 1.5C4 1.77614 4.22386 2 4.5 2H7.5C7.77614 2 8 1.77614 8 1.5ZM3.08535 2H1.5C1.22386 2 1 2.22386 1 2.5V14.5C1 14.7761 1.22386 15 1.5 15H10.5C10.7761 15 11 14.7761 11 14.5V2.5C11 2.22386 10.7761 2 10.5 2H8.91465C8.70873 2.5826 8.15311 3 7.5 3H4.5C3.84689 3 3.29127 2.5826 3.08535 2Z"
                                    fill="#212121"/>
                            </svg>
                        }><Link to='/appointment/reason-list'>مدیریت علت مراجعه</Link></Menu.Item>
                        <Menu.Item key="/appointment/doctor-schedule" icon={
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M8 0C12.4183 0 16 3.58172 16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0ZM8 1C4.13401 1 1 4.13401 1 8C1 11.866 4.13401 15 8 15C11.866 15 15 11.866 15 8C15 4.13401 11.866 1 8 1ZM7.5 3C7.74546 3 7.94961 3.17688 7.99194 3.41012L8 3.5V8H10.5C10.7761 8 11 8.22386 11 8.5C11 8.74546 10.8231 8.94961 10.5899 8.99194L10.5 9H7.5C7.25454 9 7.05039 8.82312 7.00806 8.58988L7 8.5V3.5C7 3.22386 7.22386 3 7.5 3Z"
                                    fill="#212121"/>
                            </svg>
                        }><Link to='/appointment/doctor-schedule'>زمانبندی برای پزشک</Link></Menu.Item>

                    </SubMenu>

                    <SubMenu key="sub2" icon={
                        <svg width="9" height="16" viewBox="0 0 10 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M9.26036 0.734315C9.57988 1.04673 9.57988 1.55327 9.26036 1.86569L2.47527 8.5L9.26036 15.1343C9.57988 15.4467 9.57988 15.9533 9.26036 16.2657C8.94084 16.5781 8.4228 16.5781 8.10328 16.2657L0.73964 9.06569C0.42012 8.75327 0.42012 8.24673 0.73964 7.93431L8.10328 0.734315C8.4228 0.421895 8.94084 0.421895 9.26036 0.734315Z"
                                fill="#212121"/>
                        </svg>
                    } title="گزارشات">

                        <Menu.Item key="/appointment/turn-report" icon={
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M10.0304 1.23749C9.73749 0.944599 9.26262 0.944599 8.96972 1.23749L1.23749 8.96973C0.944599 9.26262 0.944599 9.73749 1.23749 10.0304L2.01208 10.805C2.01227 10.8051 2.01252 10.8052 2.01283 10.8053C2.01548 10.8064 2.02385 10.8092 2.03946 10.8098C2.07351 10.8113 2.12291 10.8017 2.17144 10.7751C2.49223 10.5996 2.86035 10.5 3.25024 10.5C4.49288 10.5 5.50024 11.5074 5.50024 12.75C5.50024 13.1399 5.40065 13.508 5.22513 13.8288C5.19857 13.8773 5.18892 13.9267 5.19041 13.9608C5.19109 13.9764 5.19387 13.9848 5.19495 13.9874C5.19508 13.9877 5.19518 13.988 5.19527 13.9882L5.96973 14.7626C6.26262 15.0555 6.73749 15.0555 7.03039 14.7626L14.7626 7.03039C15.0555 6.73749 15.0555 6.26262 14.7626 5.96973L13.9881 5.1952C13.9879 5.19511 13.9877 5.19501 13.9873 5.19488C13.9847 5.19381 13.9763 5.19102 13.9607 5.19034C13.9267 5.18885 13.8773 5.19849 13.8288 5.22504C13.508 5.40047 13.14 5.5 12.7502 5.5C11.5076 5.5 10.5002 4.49264 10.5002 3.25C10.5002 2.86022 10.5998 2.4922 10.7752 2.17148C10.8017 2.12295 10.8114 2.07356 10.8099 2.03952C10.8092 2.02392 10.8064 2.01555 10.8054 2.01289C10.8052 2.01259 10.8051 2.01234 10.805 2.01215L10.0304 1.23749ZM8.26262 0.530385C8.94604 -0.153032 10.0541 -0.153032 10.7375 0.530385L11.5127 1.30561C11.9192 1.71208 11.8496 2.2911 11.6525 2.65136C11.5556 2.82865 11.5002 3.03211 11.5002 3.25C11.5002 3.94036 12.0599 4.5 12.7502 4.5C12.9681 4.5 13.1716 4.44468 13.3489 4.3477C13.7091 4.15065 14.2882 4.08106 14.6946 4.48752L15.4697 5.26262C16.1531 5.94604 16.1531 7.05407 15.4697 7.73749L7.73749 15.4697C7.05407 16.1531 5.94604 16.1531 5.26262 15.4697L4.48759 14.6947C4.08107 14.2882 4.15074 13.7091 4.34786 13.3488C4.44489 13.1715 4.50024 12.9679 4.50024 12.75C4.50024 12.0596 3.9406 11.5 3.25024 11.5C3.0323 11.5 2.82877 11.5554 2.65145 11.6524C2.29118 11.8495 1.71207 11.9192 1.30554 11.5127L0.530386 10.7375C-0.153031 10.0541 -0.153033 8.94604 0.530385 8.26262L8.26262 0.530385Z"
                                    fill="#212121"/>
                            </svg>
                        }><Link to='/appointment/turn-report'>گزارش نوبت دهی</Link></Menu.Item>

                        <Menu.Item key="/appointment/patient-reports" icon={
                            <svg width="13" height="16" viewBox="0 0 13 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M11.8562 11.1974V11.1224H11.7812H1.21875H1.14375V11.1974V14.2004C1.14375 14.5742 1.45127 14.8753 1.82812 14.8753H11.1719C11.5487 14.8753 11.8562 14.5742 11.8562 14.2004V11.1974ZM1.82812 1.12472V1.12456L1.82317 1.12489L1.74048 1.13036L1.74047 1.1302L1.73551 1.13086C1.40222 1.17537 1.14375 1.45692 1.14375 1.79959V9.99771V10.0727H1.21875H3.25H3.325V9.99771V8.19454C3.325 7.71737 3.69316 7.32307 4.16742 7.27474L4.26749 7.26977H8.73438C9.22169 7.26977 9.62106 7.63368 9.66996 8.09813L9.675 8.19647V9.99771V10.0727H9.75H11.7812H11.8562V9.99771V1.79959C11.8562 1.42576 11.5487 1.12472 11.1719 1.12472H1.82812ZM8.60625 8.39449V8.31949H8.53125H4.46875H4.39375V8.39449V9.99771V10.0727H4.46875H8.53125H8.60625V9.99771V8.39449ZM11.1719 0.075C12.1412 0.075 12.925 0.848232 12.925 1.79959V14.2004C12.925 15.1518 12.1412 15.925 11.1719 15.925H1.82812C0.858784 15.925 0.075 15.1518 0.075 14.2004V1.79959C0.075 0.888279 0.794151 0.140439 1.70671 0.0790687L1.82937 0.075H11.1719ZM9.95312 12.4722C10.2494 12.4722 10.4875 12.7083 10.4875 12.997C10.4875 13.2609 10.2887 13.4808 10.0283 13.5167L9.95065 13.5219H3.04792C2.75168 13.5219 2.51355 13.2858 2.51355 12.997C2.51355 12.7331 2.71235 12.5133 2.97277 12.4773L3.0504 12.4722H9.95312ZM6.5 2.47087C7.58152 2.47087 8.45625 3.33362 8.45625 4.39541C8.45625 5.4572 7.58152 6.31995 6.5 6.31995C5.41848 6.31995 4.54375 5.4572 4.54375 4.39541C4.54375 3.33362 5.41848 2.47087 6.5 2.47087ZM6.5 3.52059C6.01096 3.52059 5.6125 3.91115 5.6125 4.39541C5.6125 4.87967 6.01096 5.27023 6.5 5.27023C6.98904 5.27023 7.3875 4.87967 7.3875 4.39541C7.3875 3.91115 6.98904 3.52059 6.5 3.52059Z"
                                    fill="#212121"/>
                            </svg>
                        }><Link to='/appointment/patient-reports'>گزارش مراجعه بیماران</Link></Menu.Item>

                        <Menu.Item key="/appointment/doctor-reports" icon={
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <g clipPath="url(#clip0)">
                                    <path
                                        d="M0.5 0C0.223858 0 0 0.223858 0 0.5V5.50003C0 7.8163 1.75002 9.72384 4 9.97256V11C4 13.7614 6.23858 16 9 16C11.7614 16 14 13.7614 14 11V9.94999C15.1411 9.71836 16 8.70948 16 7.5C16 6.11929 14.8807 5 13.5 5C12.1193 5 11 6.11929 11 7.5C11 8.70948 11.8589 9.71836 13 9.94999V11C13 13.2092 11.2091 15 9 15C6.79086 15 5 13.2092 5 11V9.97256C7.24998 9.72384 9 7.8163 9 5.50003V0.5C9 0.223858 8.77614 0 8.5 0H6.5C6.22386 0 6 0.223858 6 0.5C6 0.776142 6.22386 1 6.5 1H8V5.50003C8 7.43302 6.433 9.00003 4.5 9.00003C2.567 9.00003 1 7.43302 1 5.50003V1H2.5C2.77614 1 3 0.776142 3 0.5C3 0.223858 2.77614 0 2.5 0H0.5ZM13.5 6C14.3284 6 15 6.67157 15 7.5C15 8.32843 14.3284 9 13.5 9C12.6716 9 12 8.32843 12 7.5C12 6.67157 12.6716 6 13.5 6Z"
                                        fill="#212121"/>
                                </g>
                                <defs>
                                    <clipPath id="clip0">
                                        <rect width="16" height="16" fill="white"/>
                                    </clipPath>
                                </defs>
                            </svg>
                        }><Link to='/appointment/doctor-reports'>گزارش عملکرد پزشکان</Link></Menu.Item>

                        <Menu.Item key="/appointment/department-reports" icon={
                            <svg width="15" height="14" viewBox="0 0 15 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M2.675 11.2V11.15H2.625H1.6875C0.786124 11.15 0.05 10.3696 0.05 9.4V2.2C0.05 1.0095 0.954017 0.05 2.0625 0.05H11.0625C11.9639 0.05 12.7 0.830413 12.7 1.8V2.8V2.85H12.75H13.3125C14.2139 2.85 14.95 3.63041 14.95 4.6V12.2C14.95 13.1696 14.2139 13.95 13.3125 13.95H4.3125C3.41112 13.95 2.675 13.1696 2.675 12.2V11.2ZM2.625 10.05H2.675V10V4.6C2.675 3.63041 3.41112 2.85 4.3125 2.85H11.625H11.675V2.8V1.8C11.675 1.4441 11.4038 1.15 11.0625 1.15H2.0625C1.51413 1.15 1.075 1.62319 1.075 2.2V9.4C1.075 9.7559 1.34623 10.05 1.6875 10.05H2.625ZM3.7 4.6V12.2C3.7 12.5559 3.97124 12.85 4.3125 12.85H13.3125C13.6538 12.85 13.925 12.5559 13.925 12.2V4.6C13.925 4.2441 13.6538 3.95 13.3125 3.95H4.3125C3.97123 3.95 3.7 4.2441 3.7 4.6Z"
                                    fill="#212121"/>
                            </svg>
                        }><Link to='/appointment/department-reports'>گزارش عملکرد دپارتمان</Link></Menu.Item>

                        <Menu.Item key="/appointment/financial-reports" icon={
                            <svg width="16" height="12" viewBox="0 0 16 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <g clipPath="url(#clip0)">
                                    <path
                                        d="M5 5C5 3.89543 5.89543 3 7 3C8.10457 3 9 3.89543 9 5C9 6.10457 8.10457 7 7 7C5.89543 7 5 6.10457 5 5ZM7 4C6.44772 4 6 4.44772 6 5C6 5.55228 6.44772 6 7 6C7.55228 6 8 5.55228 8 5C8 4.44772 7.55228 4 7 4ZM1.5 0C0.671573 0 0 0.671573 0 1.5V8.5C0 9.32843 0.671573 10 1.5 10H12.5C13.3284 10 14 9.32843 14 8.5V1.5C14 0.671573 13.3284 0 12.5 0H1.5ZM1 1.5C1 1.22386 1.22386 1 1.5 1H3V2C3 2.55228 2.55228 3 2 3L1 3V1.5ZM1 4L2 4C3.10457 4 4 3.10457 4 2V1H10V2C10 3.10457 10.8954 4 12 4L13 4V6H12C10.8954 6 10 6.89543 10 8V9H4V8C4 6.89543 3.10457 6 2 6H1V4ZM11 1H12.5C12.7761 1 13 1.22386 13 1.5V3L12 3C11.4477 3 11 2.55228 11 2V1ZM13 7V8.5C13 8.77614 12.7761 9 12.5 9H11V8C11 7.44772 11.4477 7 12 7H13ZM3 9H1.5C1.22386 9 1 8.77614 1 8.5V7H2C2.55228 7 3 7.44772 3 8V9ZM15.0001 8.49997C15.0001 9.88069 13.8808 11 12.5001 11H2.08545C2.29137 11.5826 2.84699 12 3.5001 12H12.5001C14.4331 12 16.0001 10.433 16.0001 8.49997V3.49997C16.0001 2.84686 15.5827 2.29125 15.0001 2.08533V8.49997Z"
                                        fill="#212121"/>
                                </g>
                                <defs>
                                    <clipPath id="clip0">
                                        <rect width="16" height="12" fill="white"/>
                                    </clipPath>
                                </defs>
                            </svg>
                        }><Link to='/appointment/financial-reports'>گزارشات مالی</Link></Menu.Item>
                    </SubMenu>

                </Menu>
            )}
        </>
    );
}

export default Sidebar


